<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Turn JBossMQ Persistence Off</title>
</head>
<body>
<span style="font-family: serif;"></span><a href="../../index.html">Index</a>
| <a href="JBossMQ.html">JBossMQ</a>
<hr style="width: 100%; height: 2px;"><a href="JBossMQ.html"></a>
<h3>Turn JBossMQ Persistence Off</h3>
This document outlines the <a
 href="http://wiki.jboss.org/wiki/Wiki.jsp?page=ConfigJBossMQNullPersistence">process
to turn persistence off altogether for the JBossMQ</a> instance
deployed to <span style="font-family: monospace;">depression</span>.<br>
<h4>Stop JBoss</h4>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/bin/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$./jboss stop</span><br>
<h4>Deploy the Null Persistence Manager</h4>
Copy the <span style="font-family: monospace;">~/jboss-4.0.1RC1/docs/exampes/jms/null-persistence-service.xml</span>
file to the <span style="font-family: monospace;">~/jboss-4.0.1RC1/server/default/deploy/jms</span>
directory:<br>
<br>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cp
docs/examples/jms/null-persistence-service.xml
server/default/deploy/jms/</span><br>
<h4>Disable the JDBC2 Persistence Manager</h4>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$mv
server/default/deploy/jms/hsqldb-jdbc2-service.xml .</span><br>
<h4>Deploy the File-based State Manager</h4>
Copy the <span style="font-family: monospace;">~/jboss-4.0.1RC1/docs/exampes/jms/file-state-service.xml</span>
file to the <span style="font-family: monospace;">~/jboss-4.0.1RC1/server/default/deploy/jms</span>
directory:<br>
<br>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cp
docs/examples/jms/file-state-service.xml server/default/deploy/jms/</span><br
 style="font-family: monospace;">
<br>
Copy the <span style="font-family: monospace;">~/jboss-4.0.1RC1/docs/exampes/jms/conf/jbossmq-state.xml</span>
file to the <span style="font-family: monospace;">~/jboss-4.0.1RC1/server/default/conf/</span>
directory:<br>
<br>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cp
docs/examples/jms/conf/jbossmq-state.xml server/default/conf/</span><br>
<h4>Disable the JDBC State Manager</h4>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$mv
server/default/deploy/jms/hsqldb-jdbc-state-service.xml .</span><br>
<h4>Configure security</h4>
Replace the current JBossMQ security configuration with the following
login module in the <span style="font-family: monospace;">~/jboss-4.0.1RC1/server/default/conf/login-config.xml</span>
file:<br>
<br>
<span style="font-family: monospace;">&lt;application-policy name =
"jbossmq"&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;
&lt;authentication&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;login-module code = "org.jboss.mq.sm.file.DynamicLoginModule"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
flag = "required"&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;module-option name =
"unauthenticatedIdentity"&gt;guest&lt;/module-option&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;module-option name =
"sm.objectname"&gt;jboss.mq:service=StateManager&lt;/module-option&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;/login-module&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;
&lt;/authentication&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&lt;/application-policy&gt;</span><br>
<h4>Start JBoss</h4>
<span style="font-family: monospace;">$cd</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$cd jboss-4.0.1RC1/bin/</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">$./jboss start</span><br
 style="font-family: monospace;">
<hr style="width: 100%; height: 2px;"><span style="font-family: serif;"></span><a
 href="../../index.html">Index</a>
| <a href="JBossMQ.html">JBossMQ</a><br>
</body>
</html>
